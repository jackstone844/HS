"use strict";function Auth(e,t){return t()}function dataservice(e){function t(t,o,n){function r(e){return e.data}return e({url:"/api",method:"GET",params:{uniqueId:t,pageId:o,sessionId:n}}).then(r)}return{getData:t}}!function(){angular.module("app",["ui.router","firebase"]).config(function(){var e={appName:"Hackney Social",authDomain:"hackneysocial-71b7f.firebaseapp.com",databaseURL:"https://hackneysocial-71b7f.firebaseio.com",storageBucket:"hackneysocial-71b7f.appspot.com",apiKey:"AIzaSyDTzHwzw-achZtFPdRLmZjnFnKrwf0_Exw"};firebase.initializeApp(e)})}(),angular.module("app").factory("Auth",Auth),Auth.$inject=["$http","$firebaseAuth"],angular.module("app").factory("dataservice",dataservice),dataservice.$inject=["$http"],function(){angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("welcome",{url:"/",templateUrl:"index/template.html",controller:"indexController"}).state("login",{url:"/admin/login",controller:"loginController",templateUrl:"login/template.html",resolve:{requireNoAuth:["$state","Auth",function(e,t){return t.$requireSignIn().then(function(t){e.go("admin.home")},function(e){})}]}}).state("admin",{url:"/admin/profile",controller:"profileController",templateUrl:"profile/template.html",resolve:{requireAuth:["$state","Auth",function(e,t){return t.$requireSignIn().then(function(e){},function(t){localStorage.getItem("HSToken")?(localStorage.removeItem("HSToken"),setTimeout(function(){e.go("login")},500)):e.go("login")})}]}}).state("admin.venue",{url:"/venue",controller:"venueController",templateUrl:"profileVenue/template.html",resolve:{requireAuth:["$state","Auth",function(e,t){return t.$requireSignIn().then(function(e){},function(t){localStorage.getItem("HSToken")?(localStorage.removeItem("HSToken"),setTimeout(function(){e.go("login")},500)):e.go("login")})}]}}).state("admin.home",{url:"/home",controller:"homeController",templateUrl:"profileHome/template.html",resolve:{requireAuth:["$state","Auth",function(e,t){return t.$requireSignIn().then(function(e){},function(t){localStorage.getItem("HSToken")?(localStorage.removeItem("HSToken"),setTimeout(function(){e.go("login")},500)):e.go("login")})}]}}).state("admin.dashboard",{url:"/dashboard",controller:"dashboardController",templateUrl:"profileDashboard/template.html",resolve:{requireAuth:["$state","Auth",function(e,t){return t.$requireSignIn().then(function(e){},function(t){localStorage.getItem("HSToken")?(localStorage.removeItem("HSToken"),setTimeout(function(){e.go("login")},500)):e.go("login")})}]}})}])}(),function(){function e(e,t,o){e.userDetails={uid:t.$getAuth().uid,token:t.$getAuth().refreshToken}}e.$inject=["$scope","Auth","$state"],angular.module("app").controller("dashboardController",e),e.$injext=["$scope","Auth","$state"]}(),function(){function e(e,t,o){e.userDetails={uid:t.$getAuth().uid,token:t.$getAuth().refreshToken}}e.$inject=["$scope","Auth","$state"],angular.module("app").controller("homeController",e),e.$injext=["$scope","Auth","$state"]}(),function(){function e(e,t,o,n,r){e.user={email:"",password:""},e.login=function(){t.$signInWithEmailAndPassword(e.user.email,e.user.password).then(function(e){console.log("User logged in to Firebase");var o=t.$getAuth().uid;a(o)},function(t){console.log(t.message),e.err=t});var a=function(e){return n({url:"/api/authenticate",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:r,data:{uid:e}}).then(function(e){if(1==e.data.authenticated){console.log(e.data.token);var n=e.data.token;localStorage.setItem("HSToken",n),o.go("admin.home")}else t.$signOut().then(function(){console.log("no token recieved")})},function(e){console.log(e)})}}}angular.module("app").controller("loginController",e),e.$inject=["$scope","Auth","$state","$http","$httpParamSerializer"]}(),function(){function e(){}angular.module("app").controller("indexController",e),e.$injext=[]}(),function(){function e(e,t,o){e.userDetails={uid:t.$getAuth().uid,token:t.$getAuth().refreshToken},e.logout=function(){t.$signOut().then(function(){localStorage.removeItem("HSToken"),setTimeout(function(){o.go("login")},500)})}}e.$inject=["$scope","Auth","$state"],angular.module("app").controller("profileController",e),e.$injext=["$scope","Auth","$state"]}(),function(){function e(e,t,o){e.userDetails={uid:t.$getAuth().uid,token:t.$getAuth().refreshToken}}e.$inject=["$scope","Auth","$state"],angular.module("app").controller("venueController",e),e.$injext=["$scope","Auth","$state"]}();